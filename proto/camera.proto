syntax = "proto3";

package camera.v1;

service CameraService {
  rpc GetLocationsByUserId (GetLocationsByUserIdRequest)
      returns (GetLocationsByUserIdResponse);
  rpc CreateLocation (CreateLocationRequest)
      returns (Location);
  rpc AddCamera (AddCameraRequest) returns (AddCameraResponse);
  rpc LinkCamera (LinkCameraRequest) returns (LinkCameraResponse);
}

message LinkCameraRequest {
  string token = 1;
}

message LinkCameraResponse {
  string accessToken = 1;
  string refreshToken = 2;
}

message AddCameraRequest {
  string name = 1;
  string locationId = 2;
  string userId = 3;
}

message AddCameraResponse {
  string token = 1;
}

message GetLocationsByUserIdRequest {
  string userId = 1;
}

message GetLocationsByUserIdResponse {
  repeated Location locations = 1;
}

message CreateLocationRequest {
  string userId = 1;
  string name = 2;
}

message Location {
  string id = 1;
  string name = 2;
  string userId = 3;
  repeated Camera cameras = 4;
}

message Camera {
  string id = 1;
  string name = 2;
  CameraSettings cameraSettings = 3;
}

message CameraSettings {
  string id = 1;
  Status aiStatus = 2;
}

enum Status {
  ON = 0;
  OFF = 1;
}
